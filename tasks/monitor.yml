######################################################################################
# nfs - monitor w/ tmux
######################################################################################
- debug: msg="NFS Client - monitor tools"

- name: mkdir -p ~/.tmuxinator
  shell: |
    mkdir -p ~/.tmuxinator
  become: '{{ item }}'
  args:
    executable: /bin/bash
    creates: '$HOME/.tmuxinator'
  ignore_errors: yes
  with_items:
    - true  # Run as root
    - false  # Run as vagrant
  tags:
  - tmux
  - tmuxinator

- name: Generate /home/vagrant/.tmuxinator/perf.yaml file
  template:
    src: "home/vagrant/.tmuxinator/perf.yml.j2"
    dest: "/home/vagrant/.tmuxinator/perf.yml"
    mode: "0644"
  become: '{{ item }}'
  ignore_errors: yes
  with_items:
    - false  # Run as vagrant
  tags:
  - tmux
  - tmuxinator
  when: ansible_ssh_user=="vagrant"
